{
  "create entity": {
    "prefix": "c-entity",
    "body": [
      "import { Column, Entity, PrimaryGeneratedColumn } from \"typeorm\";",
      "import CrudBaseEntity from \"./tools/base-entity\";",
      "",
      "@Entity(\"${1:book}\")",
      "export class ${2:Book} extends CrudBaseEntity {",
      "  @PrimaryGeneratedColumn({ comment: \"ID\"})",
      "  id!: number;",
      "",
      "  @Column({ type: \"varchar\", length: 255 })",
      "  ${3:name}!: string;",
      "}",
      ""
    ],
    "description": "Create a new entity"
  },
  "create service": {
    "prefix": "c-service",
    "body": [
      "import CrudService from \"./base/crud.service\";",
      "import db from \"@/data-source\";",
      "import { ${1:Book} } from \"@/export\";",
      "",
      "const ${2:repository} = db.getRepository(${1:Book});",
      "",
      "export default class ${1:Book}Service extends CrudService<${1:Book}> {",
      "  constructor() {",
      "    super(${2:repository});",
      "  }",
      "}",
      ""
    ],
    "description": "Create a new service"
  },
  "create controller": {
    "prefix": "c-controller",
    "body": [
      "import {",
      "  Body,",
      "  ContentType,",
      "  Controller,",
      "  CurrentUser,",
      "  Delete,",
      "  Get,",
      "  Param,",
      "  Post,",
      "  Put,",
      "  QueryParams,",
      "  UseBefore,",
      "} from \"routing-controllers\";",
      "import { ${2:Book}, ${2:Book}Service } from \"@/export\";",
      "import { authenticateToken } from \"@/middlewares/jwt\";",
      "import { PageQuery, TokenUser } from \"@/typing\";",
      "",
      "@Controller(\"/${1:book}\")",
      "@UseBefore(authenticateToken)",
      "export class ${2:Book}Controller {",
      "  service: ${2:Book}Service;",
      "",
      "  constructor() {",
      "    this.service = new ${2:Book}Service();",
      "  }",
      "",
      "  @Get(\"/\")",
      "  async queryList(@QueryParams() query: PageQuery<Partial<${2:Book}>>) {",
      "    return this.service.queryList(query);",
      "}",
      "",
      "  @Get(\"/all\")",
      "  async quertAll() {",
      "    return this.service.getAll();",
      "  }",
      "",
      "",
      "  @Get(\"/:id\")",
      "  async queryById(@Param(\"id\") id: number) {",
      "    return this.service.queryOne({ id });",
      "  }",
      "",
      "  @Post(\"/\")",
      "  @ContentType(\"application/json\")",
      "  async create(@Body() body: ${2:Book}, @CurrentUser() user: TokenUser) {",
      "    return this.service.create({ ...body, created_by: user.username });",
      "  }",
      "",
      "  @Put(\"/:id\")",
      "  @ContentType(\"application/json\")",
      "  async update(@Param(\"id\") id: number, @Body() body: ${2:Book}, @CurrentUser() user: TokenUser) {",
      "    return this.service.update(id, { ...body, updated_by: user.username });",
      "  }",
      "",
      "  @Delete(\"/:id\")",
      "  async delete(@Param(\"id\") id: number) {",
      "    return this.service.delete(id);",
      "  }",
      "}",
      ""
    ],
    "description": "Create a new controller"
  },
  "create api file": {
    "prefix": "c-api",
    "body": [
      "import request from \"@/utils/request\";",
      "import { ${2:Book}, PageQuery, PageResult } from \"app\";",
      "",
      "export const fetch${2:Book}List = (params: PageQuery<Partial<${2:Book}>>) => {",
      "  return request<PageResult<${2:Book}>>({",
      "    url: \"/${1:book}\",",
      "    method: \"get\",",
      "    params,",
      "  });",
      "};",
      "",
      "export const get${2:Book} = (id: number) => {",
      "  return request<${2:Book}>({",
      "    url: \"/${1:book}/\" + id,",
      "    method: \"get\",",
      "  });",
      "};",
      "",
      "export const create${2:Book} = (data: ${2:Book}) => {",
      "  return request<${2:Book}>({",
      "    url: \"/${1:book}\",",
      "    method: \"post\",",
      "    data,",
      "  });",
      "};",
      "",
      "export const update${2:Book} = (data: ${2:Book}) => {",
      "  return request<${2:Book}>({",
      "    url: `/${1:book}/${data.id}`,",
      "    method: \"put\",",
      "    data,",
      "  });",
      "};",
      "",
      "export const delete${2:Book} = (id: number) => {",
      "  return request<${2:Book}>({",
      "    url: \"/${1:book}/\" + id,",
      "    method: \"delete\",",
      "  });",
      "};",
      ""
    ],
    "description": "Create a api file"
  }
}